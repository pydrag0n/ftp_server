<!DOCTYPE html>
<html>
<head>
    <meta name="color-scheme" content="light dark">
    <title>{{.CurrentPath}} - File Browser</title>
    <style>
		#file {
			width: 80%;
		}
    </style>
</head>
<body>
	<h1>{{.CurrentPath}}</h1>
        <form action="/upload?path={{.CurrentPath}}" method="post" enctype="multipart/form-data">
            <button type="submit">Upload</button>
            <input type="file" name="file" id="file" required>
        </form>

    <table>
        <tbody>
			<tr>
				<th></th>
				<th>Name</th>
				<th>Last Modified</th>
				<th>Size</th>
			</tr>
			<tr><th colspan="5"><hr></th></tr>

            {{ range .Files }}
            <tr>
                <td>
                    {{ if .IsDir }}
                        <img src="/static/icon/light/folder.png" valign="top">
                    {{ else }}
                        <img src="/static/icon/light/{{ iconForExt .Filename }}" valign="top">
                    {{ end }}
                </td>
                <td>
					<a href="/files{{ .Path }}" title="{{ .Filename }}">{{ .Filename }}{{ if .IsDir }}/{{ end }}</a>
                </td>
                <td align="right">{{ .Date }}</td>
                <td align="right">{{ if .IsDir }}-{{ else }}{{ .Size | formatSize }}{{ end }}</td>
            </tr>
            {{ end }}

        </tbody>
    </table>
</body>
</html>
